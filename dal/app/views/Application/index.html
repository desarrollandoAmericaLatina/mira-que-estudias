#{extends 'main.html' /}
#{set title:'Home' /}

<style>

.listing a:link { text-decoration: none; font-weight:bold; color:black; font-size: 1.1em;}


</style>

	<style type="text/css">
	html, body {
		background:	white;
		width:		100%;
		height:		100%;					
		padding:	0;
		margin:		0;
		overflow:	auto; /* when page gets too small */
	}
	#container {
		background:	#999;
		height:		100%;
		margin:		0 auto;
		width:		100%;
		max-width:	100%;
		min-width:	100%;
		_width:		100%; /* min-width for IE6 */
	}
	.pane {
		display:	none; /* will appear when layout inits */
	}
	.ui-layout-east { width:50%;}
	</style>

<p>Selecciona el área de interes y luego podras comparar y ver en detalle
sus carreras.</p>

<div style="margin-top:1em;" id="tab-menu-container">
	<ul>
		#{list items:areas, as:'areaIter'}
		<li id="inicio"><a href="@{index(areaIter.id)}"
			class="${areaIter == area ? "active" : ""}"><img src="../public/images/icons/x-area${areaIter.id}.png"/><br/><span>${areaIter.nombre}</span>
		</a>
		</li> 
		#{/list}
	</ul>
</div>

<div id="container" style="height:640px;">
	<div class="pane ui-layout-center">
		<table class="listing">
			<thead>
				<tr>
					<th>Nombre</th>
					<th>Tipo Institución</th>
					<th>Empleabilidad</th>
					<th>Ultimo año</th>
				</tr>
			</thead>
			#{list items:area.carreras, as:'carrera'}
				#{list items:carrera.carrerasTipoInst, as:'carreraTipoInst'}
					<tr>
						<td><img align="absmiddle" src="../public/images/icons/s-area${area.id}.png"/> <a href="javascript:void cargarCarrera(${carrera.id})">${carrera.nombre}</a></td>
						<td>${carreraTipoInst.tipoInst.toLowerCase().capitalizeWords()}</td>
						<td> <span class="inlinesparkline">${carreraTipoInst.stringEmpleabilidad}</span></td>
						<td><span style="height:16px; width:${carreraTipoInst.pixelsEmpleabilidad}px"></span>${carreraTipoInst.ultEmpleabilidad.valor}</td>
					</tr>
				#{/list}
			#{/list}
		</table>
	</div>
	<div id="contenedorCarreras" class="pane ui-layout-east"><p style="color:silver;">Haz click en una profesión para saber más de ella</p></div>

</div>
	
<script>	
	$(document).ready(function () {
		$('#container').layout({ east: {size: "300"} });
		$('.inlinesparkline').sparkline('html', {chartRangeMin: 0, chartRangeMax:1, width: "80px", height: "40px; "}); 
		
	});
	
	
	var cargarCarreraAction = #{jsAction @detalleCarrera(':carrera') /}
	
	function cargarCarrera(carreraID) {
	   
	   $('#contenedorCarreras').load(
	       cargarCarreraAction({carrera: carreraID})
	   )
		
	
	}
</script>


